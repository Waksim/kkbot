
# Genshin TCG Deck Bot (kkbot)

![Python](https://img.shields.io/badge/Python-3.13-3776AB?logo=python)
![Django](https://img.shields.io/badge/Django-5.2-092E20?logo=django)
![aiogram](https://img.shields.io/badge/aiogram-3.10-2CA5E0?logo=telegram)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791?logo=postgresql)
![Docker](https://img.shields.io/badge/Docker-blue?logo=docker)

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–æ–¥–∞–º–∏ –∫–∞—Ä—Ç–æ—á–Ω–æ–π –∏–≥—Ä—ã **Genshin Impact: "–°–≤—è—â–µ–Ω–Ω—ã–π –ø—Ä–∏–∑—ã–≤ —Å–µ–º–µ—Ä—ã—Ö"**. –ë–æ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∫–æ–¥—ã –∫–æ–ª–æ–¥, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∏—Ö —Å–æ—Å—Ç–∞–≤–æ–º –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑–æ–Ω–∞–Ω—Å—ã.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   **–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∫–æ–¥–æ–≤:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–¥ –∫–æ–ª–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `EiFyxd4NFkHyyuENH5ECzGMNF7Eh0p0OChLB6J4PCgHS9TUQFFFC958RGrLhEsMXDZEB`), –∏ –æ–Ω –ø–æ–∫–∞–∂–µ—Ç –µ–µ —Å–æ—Å—Ç–∞–≤.
-   **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–¥—ã —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å—Ç–∏–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –∫–∞—Ä—Ç–∞–º–∏.
-   **–†–∞—Å—á–µ—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å–æ–≤:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö, —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏ —Ñ—Ä–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–µ–∑–æ–Ω–∞–Ω—Å–æ–≤.
-   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–¥–æ–≤:** –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 20 –∫–æ–¥–æ–≤ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏, –±–æ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Ö –≤—Å–µ –∏ –ø—Ä–∏—à–ª–µ—Ç –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–æ–π.
-   **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–æ–ª–æ–¥—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –±—É–¥—É—â–µ–º, –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ API Hoyolab.
-   **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ:** –£–¥–æ–±–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
genshin_tcg_bot/
‚îú‚îÄ‚îÄ .env.example        # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ Docker
‚îú‚îÄ‚îÄ manage.py           # –£—Ç–∏–ª–∏—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Django
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ apps/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ Django
‚îÇ ‚îú‚îÄ‚îÄ bot/              # –õ–æ–≥–∏–∫–∞ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ handlers/       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (deck_codes.py)
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ services/       # API, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ management/     # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º (startbot)
‚îÇ ‚îú‚îÄ‚îÄ cards/            # –ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–∞–º–∏
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ management/     # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î –∫–∞—Ä—Ç (populate_db)
‚îÇ ‚îî‚îÄ‚îÄ users/            # –ú–æ–¥–µ–ª–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ–ª–æ–¥
‚îú‚îÄ‚îÄ core/               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django-–ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ media/              # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ä—Ç)
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫

–ü—Ä–æ–µ–∫—Ç —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
-   –°–µ—Ä–≤–µ—Ä —Å –û–° Ubuntu 24.04 (–∏–ª–∏ –¥—Ä—É–≥–æ–π Debian-based –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤).
-   –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH.

#### –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Docker (–¥–ª—è Ubuntu)
–ï—Å–ª–∏ —É –≤–∞—Å –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–∫–µ—Ç—ã –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt-get update
sudo apt-get install -y git curl

# –°–∫–∞—á–∏–≤–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
rm get-docker.sh

# –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—à–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker, —á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo
sudo usermod -aG docker ${USER}

# –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å newgrp)
echo "--------------------------------------------------------"
echo "‚úÖ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –í—ã–π–¥–∏—Ç–µ —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –≤—Å–µ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å"
echo "--------------------------------------------------------"
```

### –®–∞–≥ 2: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Waksim/kkbot.git
cd kkbot

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cp .env.example .env
nano .env
```

–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Ñ–∞–π–ª–µ `.env` –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
-   `BOT_TOKEN`: –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É [@BotFather](https://t.me/BotFather).
-   `ADMIN_USERNAME`: —é–∑–µ—Ä–Ω–µ–π–º –¥–ª—è –∞–¥–º–∏–Ω–∫–∏.
-   `ADMIN_PASSWORD`: –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω–∫–∏.

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker compose up --build -d
```

### –®–∞–≥ 4: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ. –û–Ω–∏ —Å–∫–∞—á–∞—é—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–∞—Ä—Ç–∞—Ö, –∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–ª–æ–¥—ã.

```bash
# 1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–∞—Ä—Ç –∏ –∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-10 –º–∏–Ω—É—Ç)
docker compose run --rm web python manage.py populate_db

# 2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∫–æ–ª–æ–¥ –¥–ª—è –∫—ç—à–∞
docker compose run --rm web python manage.py import_decks
```

–ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—â–µ–Ω! –ë–æ—Ç –Ω–∞—á–Ω–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –≤ Telegram, –∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞.

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
docker compose logs -f
```

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
-   **–í –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:** –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–¥–æ–≤ –∫–æ–ª–æ–¥.
-   **–í –≥—Ä—É–ø–ø–∞—Ö:** –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/kk <–∫–æ–¥_–∫–æ–ª–æ–¥—ã_1> <–∫–æ–¥_–∫–æ–ª–æ–¥—ã_2> ...`

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–î–æ—Å—Ç—É–ø –≤ –∞–¥–º–∏–Ω–∫—É –ø–æ –∞–¥—Ä–µ—Å—É `http://<IP_–ê–î–†–ï–°_–°–ï–†–í–ï–†–ê>:8000/admin/`.
-   **–õ–æ–≥–∏–Ω:** `ADMIN_USERNAME` –∏–∑ `.env` —Ñ–∞–π–ª–∞.
-   **–ü–∞—Ä–æ–ª—å:** `ADMIN_PASSWORD` –∏–∑ `.env` —Ñ–∞–π–ª–∞.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
-   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞–º–∏ (`Cards`):** –ü—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–∏—Å–∫ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç –≤ –±–∞–∑–µ. –ï—Å—Ç—å —É–¥–æ–±–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É, —Ç–µ–≥–∞–º –∏ –Ω–æ–≤–∏–∑–Ω–µ. –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–º–µ–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã.
-   **–ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ **"–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç—ã –∏–∑ API"**, –∫–æ—Ç–æ—Ä–∞—è —Å–≤–µ—Ä—è–µ—Ç –∫–∞—Ä—Ç—ã —Å –∏–Ω—Ñ–æ–π –Ω–∞ Hakushin –∏ –µ—Å–ª–∏ –Ω–∞–¥–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç.
-   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`TelegramUsers`):** –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∏ —Å –±–æ—Ç–æ–º. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –µ–≥–æ –∫–æ–ª–æ–¥ –∏ –ª–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
-   **–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–ª–æ–¥ (`Decks`):** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–¥, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –±–æ—Ç–æ–º (–∫—ç—à).